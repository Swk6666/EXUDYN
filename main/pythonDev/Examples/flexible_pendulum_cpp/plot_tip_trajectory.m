% Plot the second pendulum tip trajectories from Python and C++ simulations.
% Requires the MAT file generated by export_tip_trajectory.py
%
% Example usage (from within MATLAB/Octave):
%   cd('/Users/swk/Documents/swk/swk_python_file/EXUDYN/main/pythonDev/Examples/flexible_pendulum_cpp');
%   plot_tip_trajectory;

data = load(fullfile('data', 'tip_trajectory.mat'));

% Extract arrays
T = data.time(:);
TipPy = data.tip_python;
TipCpp = data.tip_cpp;

figure('Name','Flexible Pendulum Tip Comparison');

subplot(3,1,1);
plot(T, TipPy(:,1), 'b-', 'LineWidth', 1.2); hold on;
plot(T, TipCpp(:,1), 'r--', 'LineWidth', 1.0);
ylabel('x [m]');
legend('Python', 'C++'); grid on;
title('Second Pendulum Tip Trajectory');

subplot(3,1,2);
plot(T, TipPy(:,2), 'b-', 'LineWidth', 1.2); hold on;
plot(T, TipCpp(:,2), 'r--', 'LineWidth', 1.0);
ylabel('y [m]'); grid on;

subplot(3,1,3);
plot(T, TipPy(:,3), 'b-', 'LineWidth', 1.2); hold on;
plot(T, TipCpp(:,3), 'r--', 'LineWidth', 1.0);
ylabel('z [m]'); xlabel('time [s]'); grid on;

% Optional 3D trajectory visualization
figure('Name','Tip Trajectory 3D');
plot3(TipPy(:,1), TipPy(:,2), TipPy(:,3), 'b-', 'LineWidth', 1.2); hold on;
plot3(TipCpp(:,1), TipCpp(:,2), TipCpp(:,3), 'r--', 'LineWidth', 1.0);
xlabel('x [m]'); ylabel('y [m]'); zlabel('z [m]');
legend('Python', 'C++'); grid on; axis equal;
